<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Çocuklar İçin Yapay Zeka Macerası</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700;800&family=Orbitron:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Exo 2', sans-serif;
            background-color: #0f172a;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(56, 189, 248, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(168, 85, 247, 0.1) 0%, transparent 50%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .tech-font {
            font-family: 'Orbitron', sans-serif;
        }
        
        .card {
            perspective: 1000px;
            height: 400px; /* Fixed height for consistency */
            cursor: pointer;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 1.5rem;
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
            overflow: hidden;
        }
        
        .card-front {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            color: #38bdf8;
            display: flex;
            flex-direction: column;
            border: 2px solid #38bdf8;
        }
        
        .card-back {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            color: #38bdf8;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            border: 2px solid #a855f7;
        }
        
        .progress-bar {
            height: 10px;
            border-radius: 5px;
            background: rgba(56, 189, 248, 0.2);
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #38bdf8, #a855f7);
            transition: width 0.5s ease;
        }
        
        .btn-nav {
            transition: all 0.3s ease;
        }
        
        .btn-nav:hover {
            transform: translateY(-3px);
        }
        
        .btn-nav:active {
            transform: translateY(0);
        }
        
        .character {
            position: absolute;
            bottom: -10px;
            right: -10px;
            width: 120px;
            height: 120px;
            transition: all 0.3s ease;
        }
        
        .card:hover .character {
            transform: translateY(-10px);
        }
        
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
            background-color: var(--color);
            border-radius: 50%;
            animation: fall 3s ease-out forwards;
            z-index: 9999;
        }

        @keyframes fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        .badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #38bdf8, #a855f7);
            color: white;
            border-radius: 20px;
            padding: 5px 12px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .glow {
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
            }
            to {
                box-shadow: 0 0 20px rgba(56, 189, 248, 0.8), 0 0 30px rgba(168, 85, 247, 0.5);
            }
        }
        
        .floating {
            animation: floating 3s infinite ease-in-out;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .tech-bg {
            background-image: 
                linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.9)),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%2338bdf8' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .circuit-border {
            border-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%2338bdf8' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E") 1;
            border-width: 4px;
            border-style: solid;
        }
        
        .certificate {
            background-image: 
                linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.9)),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='white' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            background-color: #0f172a;
            border: 4px solid;
            border-image: linear-gradient(45deg, #38bdf8, #a855f7, #f472b6, #38bdf8) 1;
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.5), 0 0 50px rgba(168, 85, 247, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .certificate::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(56, 189, 248, 0.15) 0%, transparent 70%);
            animation: rotate-glow 15s linear infinite;
            z-index: -1;
        }

        @keyframes rotate-glow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .typing-effect {
            overflow: hidden;
            border-right: .15em solid #38bdf8;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: 
                typing 3.5s steps(40, end),
                blink-caret .75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #38bdf8; }
        }
        
        .sound-wave {
            display: flex;
            align-items: center;
            gap: 3px;
            height: 20px;
        }
        
        .sound-wave span {
            display: block;
            width: 3px;
            height: 100%;
            background: linear-gradient(to bottom, #38bdf8, #a855f7);
            border-radius: 3px;
            animation: sound-wave-animation 1.2s infinite ease-in-out;
        }
        
        .sound-wave span:nth-child(2) { animation-delay: 0.2s; }
        .sound-wave span:nth-child(3) { animation-delay: 0.4s; }
        .sound-wave span:nth-child(4) { animation-delay: 0.6s; }
        .sound-wave span:nth-child(5) { animation-delay: 0.8s; }
        
        @keyframes sound-wave-animation {
            0%, 100% { height: 5px; }
            50% { height: 20px; }
        }
        
        .robot-eye {
            animation: blink 4s infinite;
        }
        
        @keyframes blink {
            0%, 45%, 55%, 100% { height: 8px; }
            50% { height: 1px; }
        }

        /* Matching Game Specific Styles */
        .matching-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Adjusted for better mobile layout */
            gap: 1rem;
        }
        @media (min-width: 768px) {
            .matching-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .matching-card {
            background-color: #1e293b;
            border: 2px solid #38bdf8;
            border-radius: 0.75rem;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem; /* Adjusted font size for smaller cards */
            font-weight: bold;
            color: #e2e8f0;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            word-break: break-word; /* Allow text to break words */
            padding: 0.5rem; /* Added padding */
        }

        .matching-card.flipped {
            transform: rotateY(180deg);
        }

        .matching-card .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            padding: 0.5rem;
            text-align: center;
        }

        .matching-card .card-back-face {
            background: linear-gradient(135deg, #38bdf8, #a855f7);
            transform: rotateY(180deg);
            color: white;
            font-size: 0.9rem; /* Slightly smaller font for descriptions */
        }

        .matching-card.matched {
            pointer-events: none;
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
            color: white;
        }

        /* Print specific styles */
        @media print {
            body > *:not(#certificate-screen) {
                display: none !important;
            }
            #certificate-screen {
                display: block !important;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                box-shadow: none;
                background-image: none; /* Remove background patterns for print */
                background-color: white; /* White background for printing */
                color: black; /* Black text for printing */
            }
            #certificate-screen .certificate {
                border: none; /* Remove border for print */
                background-image: none;
                background-color: white;
                color: black;
                box-shadow: none;
                padding: 20px;
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            #certificate-screen .certificate h1, #certificate-screen .certificate p, #certificate-screen .certificate span {
                color: black !important;
                -webkit-print-color-adjust: exact; /* For printing background colors/gradients */
                print-color-adjust: exact;
            }
            #certificate-screen .flex.justify-between.items-center.mb-6 {
                display: none; /* Hide buttons in print view */
            }
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="stars" id="stars"></div>
    
    <div class="absolute top-4 right-4 z-50">
        <button id="lang-toggle-tr" class="bg-gray-700 text-white px-3 py-1 rounded-l-lg text-sm font-bold hover:bg-gray-600" data-lang="tr">TR</button>
        <button id="lang-toggle-en" class="bg-gray-800 text-white px-3 py-1 rounded-r-lg text-sm font-bold hover:bg-gray-600" data-lang="en">EN</button>
    </div>

    <div id="welcome-screen" class="max-w-5xl mx-auto">
        <div class="bg-slate-800 bg-opacity-90 rounded-3xl p-6 md:p-8 shadow-xl tech-bg glow">
            <div class="flex flex-col items-center justify-center py-8">
                <div class="mb-6 relative">
                    <div class="absolute inset-0 bg-gradient-to-r from-cyan-500 to-purple-500 blur-xl opacity-20 rounded-full"></div>
                    <h1 class="tech-font text-4xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 relative z-10 text-center" data-lang-key="welcome_title">
                        YAPAY ZEKA MACERASI
                    </h1>
                </div>
                
                <div class="w-full max-w-md mx-auto mb-8 relative">
                    <div class="floating mb-8">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40 mx-auto">
                            <circle cx="100" cy="70" r="40" fill="#38bdf8" opacity="0.2" />
                            <circle cx="85" cy="60" r="8" fill="#38bdf8" class="robot-eye" />
                            <circle cx="115" cy="60" r="8" fill="#38bdf8" class="robot-eye" />
                            <path d="M85 85 Q100 100 115 85" stroke="#38bdf8" stroke-width="3" fill="none" />
                            <rect x="60" y="110" width="80" height="60" rx="10" fill="#38bdf8" opacity="0.2" />
                            <rect x="70" y="125" width="60" height="10" rx="5" fill="#38bdf8" opacity="0.5" />
                            <rect x="70" y="145" width="40" height="10" rx="5" fill="#38bdf8" opacity="0.5" />
                            <circle cx="70" cy="40" r="10" fill="#a855f7" opacity="0.3" />
                            <circle cx="130" cy="40" r="10" fill="#a855f7" opacity="0.3" />
                            <path d="M70 40 Q100 10 130 40" stroke="#a855f7" stroke-width="5" fill="none" opacity="0.3" />
                        </svg>
                    </div>
                    
                    <p class="text-cyan-300 text-center mb-6" data-lang-key="welcome_intro">
                        Merhaba genç kaşif! Yapay zeka dünyasına heyecan verici bir yolculuğa çıkmaya hazır mısın?
                    </p>
                    
                    <div class="bg-slate-900 p-6 rounded-xl border border-cyan-500 shadow-lg">
                        <label for="user-name" class="block text-cyan-300 mb-2 tech-font" data-lang-key="enter_name">
                            İSMİNİ GİR:
                        </label>
                        <div class="flex">
                            <input 
                                type="text" 
                                id="user-name" 
                                class="bg-slate-800 text-cyan-300 border border-cyan-500 rounded-l-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-cyan-500 tech-font"
                                placeholder="Adın ve Soyadın"
                                data-lang-placeholder-key="name_placeholder"
                            >
                            <button 
                                id="start-adventure" 
                                class="bg-gradient-to-r from-cyan-500 to-purple-500 text-white rounded-r-lg px-4 hover:from-cyan-600 hover:to-purple-600 transition-all tech-font flex items-center"
                                data-lang-key="start_button"
                            >
                                BAŞLA
                                <div class="sound-wave ml-2">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                            </button>
                        </div>
                        <p class="text-xs text-cyan-400 mt-2" data-lang-key="name_hint">* İsmin sertifikanda görünecek</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 w-full">
                    <div class="bg-slate-900 p-4 rounded-xl border border-cyan-800">
                        <div class="flex items-center mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-cyan-400 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
                            </svg>
                            <h3 class="text-cyan-400 font-bold tech-font" data-lang-key="learn_title">ÖĞREN</h3>
                        </div>
                        <p class="text-cyan-200 text-sm" data-lang-key="learn_text">Yapay zeka hakkında eğlenceli hikayeler ve açıklamalarla yeni bilgiler öğren.</p>
                    </div>
                    
                    <div class="bg-slate-900 p-4 rounded-xl border border-purple-800">
                        <div class="flex items-center mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-purple-400 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
                            </svg>
                            <h3 class="text-purple-400 font-bold tech-font" data-lang-key="explore_title">KEŞFET</h3>
                        </div>
                        <p class="text-purple-200 text-sm" data-lang-key="explore_text">Robotlar ve yapay zeka dünyasını interaktif kartlarla keşfet.</p>
                    </div>
                    
                    <div class="bg-slate-900 p-4 rounded-xl border border-pink-800">
                        <div class="flex items-center mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-400 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z" />
                            </svg>
                            <h3 class="text-pink-400 font-bold tech-font" data-lang-key="certificate_title">SERTİFİKA</h3>
                        </div>
                        <p class="text-pink-200 text-sm" data-lang-key="certificate_text">Tüm kartları tamamla ve kendi özel yapay zeka sertifikanı kazan!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="game-screen" class="max-w-5xl mx-auto hidden">
        <div class="bg-slate-800 bg-opacity-90 rounded-3xl p-6 md:p-8 shadow-xl tech-bg">
            <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                <div>
                    <h1 class="tech-font text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400" data-lang-key="welcome_title">
                        YAPAY ZEKA MACERASI
                    </h1>
                    <p class="text-cyan-300"><span data-lang-key="hello_explorer">Merhaba</span> <span id="user-name-display" class="font-bold text-white"></span><span data-lang-key="ready_to_explore">! Yapay zeka dünyasını keşfetmeye hazır mısın?</span></p>
                </div>
                <div class="mt-4 md:mt-0 flex items-center">
                    <span class="bg-gradient-to-r from-cyan-900 to-purple-900 text-white py-2 px-4 rounded-full text-sm font-bold tech-font" data-lang-key="progress">
                        İLERLEME: <span id="overall-progress-count">0</span>/<span id="overall-total-count">0</span>
                    </span>
                    <div class="ml-3 bg-yellow-900 text-yellow-300 py-1 px-3 rounded-full text-xs font-bold flex items-center tech-font">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <span data-lang-key="child_friendly">ÇOCUK DOSTU</span>
                    </div>
                </div>
            </div>
            
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm text-cyan-300 tech-font" data-lang-key="progress_bar_label">İLERLEME ÇUBUĞU</span>
                    <span class="text-sm font-medium text-cyan-300 tech-font"><span id="progress-percent">0</span>%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" id="progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 gap-8">
                <div class="card" id="current-card">
                    <div class="card-inner">
                        <div class="card-front">
                            <div class="badge" id="card-badge"><span data-lang-key="concept">KAVRAM</span> #1</div>
                            <div class="p-6 flex flex-col h-full">
                                <h2 class="text-2xl font-bold mb-2 tech-font text-cyan-300" id="card-front-title"></h2>
                                <div class="flex-grow overflow-auto pr-2">
                                    <div id="card-front-svg" class="w-full h-48 flex items-center justify-center mb-4 floating">
                                        </div>
                                    <p id="card-front-text" class="text-cyan-100">
                                        </p>
                                </div>
                                <p class="mt-4 text-center text-cyan-400 text-sm tech-font pulse" data-lang-key="flip_card_hint">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M15.707 4.293a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L10 8.586l4.293-4.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                                    </svg>
                                    HİKAYEYİ OKUMAK İÇİN KARTI ÇEVİR
                                </p>
                            </div>
                        </div>
                        <div class="card-back">
                            <div class="p-6 flex flex-col h-full">
                                <h2 class="text-2xl font-bold mb-2 tech-font text-purple-300" id="card-back-title"></h2>
                                <div class="flex-grow overflow-auto pr-2">
                                    <p id="card-back-text" class="text-purple-100">
                                        </p>
                                </div>
                                <div class="mt-4 text-center">
                                    <span class="inline-block bg-cyan-900 text-cyan-300 rounded-full px-3 py-1 text-sm font-semibold mr-2 mb-2 tech-font">#YapayZeka</span>
                                    <span class="inline-block bg-purple-900 text-purple-300 rounded-full px-3 py-1 text-sm font-semibold mr-2 mb-2 tech-font">#Robotlar</span>
                                    <span class="inline-block bg-pink-900 text-pink-300 rounded-full px-3 py-1 text-sm font-semibold mb-2 tech-font">#Öğrenme</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex flex-col sm:flex-row justify-between mt-6 space-y-4 sm:space-y-0">
                    <button id="btn-prev" class="btn-nav bg-slate-900 text-cyan-400 border border-cyan-700 rounded-lg px-5 py-2 font-medium shadow-sm hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed tech-font">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span data-lang-key="prev_button">ÖNCEKİ</span>
                    </button>
                    
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <button id="btn-known" class="btn-nav bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg px-5 py-2 font-medium shadow-sm hover:from-green-700 hover:to-emerald-700 tech-font">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                            </svg>
                            <span data-lang-key="understood_button">ANLADIM</span>
                        </button>
                        <button id="btn-unknown" class="btn-nav bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg px-5 py-2 font-medium shadow-sm hover:from-orange-700 hover:to-red-700 tech-font">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                            </svg>
                            <span data-lang-key="repeat_button">TEKRAR</span>
                        </button>
                    </div>
                    
                    <button id="btn-next" class="btn-nav bg-gradient-to-r from-cyan-600 to-purple-600 text-white rounded-lg px-5 py-2 font-medium shadow-sm hover:from-cyan-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed tech-font">
                        <span data-lang-key="next_button">SONRAKİ</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline ml-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4-4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="mt-8 pt-6 border-t border-slate-700">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-cyan-300 tech-font" data-lang-key="learning_stats">ÖĞRENME İSTATİSTİKLERİ</h2>
                    <button id="btn-reset" class="text-sm text-cyan-500 hover:text-cyan-300 flex items-center tech-font">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                        </svg>
                        <span data-lang-key="reset_button">SIFIRLA</span>
                    </button>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
                    <div class="bg-slate-900 p-4 rounded-xl border border-cyan-800">
                        <p class="text-sm text-cyan-400 tech-font" data-lang-key="total_cards">TOPLAM KART</p>
                        <p class="text-2xl font-bold text-cyan-300 tech-font">5</p>
                    </div>
                    <div class="bg-slate-900 p-4 rounded-xl border border-green-800">
                        <p class="text-sm text-green-400 tech-font" data-lang-key="understood">ANLAŞILAN</p>
                        <p class="text-2xl font-bold text-green-300 tech-font" id="stats-known">0</p>
                    </div>
                    <div class="bg-slate-900 p-4 rounded-xl border border-orange-800">
                        <p class="text-sm text-orange-400 tech-font" data-lang-key="to_repeat">TEKRAR EDİLECEK</p>
                        <p class="text-2xl font-bold text-orange-300 tech-font" id="stats-unknown">0</p>
                    </div>
                    <div class="bg-slate-900 p-4 rounded-xl border border-blue-800">
                        <p class="text-sm text-blue-400 tech-font" data-lang-key="remaining">KALAN</p>
                        <p class="text-2xl font-bold text-blue-300 tech-font" id="stats-remaining">5</p>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-slate-700">
                <h2 class="text-xl font-semibold text-cyan-300 tech-font mb-4" data-lang-key="ask_robi_title">✨ Robi'ye Soru Sor</h2>
                <div class="bg-slate-900 p-6 rounded-xl border border-cyan-500 shadow-lg">
                    <label for="robi-question-input" class="block text-cyan-300 mb-2 tech-font" data-lang-key="ask_robi_prompt">
                        Yapay zeka hakkında bir soru sor:
                    </label>
                    <div class="flex">
                        <input 
                            type="text" 
                            id="robi-question-input" 
                            class="bg-slate-800 text-cyan-300 border border-cyan-500 rounded-l-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-cyan-500 tech-font"
                            placeholder="Örn: Robotlar rüya görür mü?"
                            data-lang-placeholder-key="ask_robi_placeholder"
                        >
                        <button 
                            id="ask-robi-btn" 
                            class="bg-gradient-to-r from-cyan-500 to-purple-500 text-white rounded-r-lg px-4 hover:from-cyan-600 hover:to-purple-600 transition-all tech-font flex items-center"
                            data-lang-key="ask_robi_button"
                        >
                            SOR ✨
                        </button>
                    </div>
                    <div id="robi-answer-container" class="mt-4 p-4 bg-slate-800 rounded-lg border border-purple-500 text-purple-200 min-h-[80px] flex items-center justify-center text-center">
                        <p id="robi-answer" data-lang-key="robi_answer_placeholder">Robi'nin cevabını bekliyorum...</p>
                        <div id="robi-loading-indicator" class="hidden sound-wave ml-4">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-slate-700">
                <h2 class="text-xl font-semibold text-cyan-300 tech-font mb-4" data-lang-key="ai_story_generator_title">✨ Yapay Zeka Hikaye Oluşturucu</h2>
                <div class="bg-slate-900 p-6 rounded-xl border border-purple-500 shadow-lg">
                    <label for="story-keywords-input" class="block text-cyan-300 mb-2 tech-font" data-lang-key="story_keywords_prompt">
                        Hikayende hangi anahtar kelimeler olsun? (virgülle ayır)
                    </label>
                    <input 
                        type="text" 
                        id="story-keywords-input" 
                        class="bg-slate-800 text-cyan-300 border border-purple-500 rounded-lg p-3 w-full mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500 tech-font"
                        placeholder="Örn: robot, uzay, arkadaşlık"
                        data-lang-placeholder-key="story_keywords_placeholder"
                    >
                    <button 
                        id="generate-story-btn" 
                        class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg px-6 py-3 w-full font-medium shadow-sm hover:from-purple-600 hover:to-pink-600 transition-all tech-font"
                        data-lang-key="generate_story_button"
                    >
                        HİKAYE OLUŞTUR ✨
                    </button>
                    <div id="ai-story-output" class="mt-4 p-4 bg-slate-800 rounded-lg border border-pink-500 text-pink-200 min-h-[120px] overflow-auto">
                        <p id="story-text" data-lang-key="story_placeholder">Hikayen burada belirecek...</p>
                        <div id="story-loading-indicator" class="hidden sound-wave ml-4 justify-center mt-4">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-slate-700">
                <h2 class="text-xl font-semibold text-cyan-300 tech-font mb-4" data-lang-key="ai_scenario_title">✨ Yapay Zeka Ne Yapar?</h2>
                <div class="bg-slate-900 p-6 rounded-xl border border-green-500 shadow-lg">
                    <label for="scenario-input" class="block text-cyan-300 mb-2 tech-font" data-lang-key="scenario_prompt">
                        Bir senaryo yaz:
                    </label>
                    <input 
                        type="text" 
                        id="scenario-input" 
                        class="bg-slate-800 text-cyan-300 border border-green-500 rounded-lg p-3 w-full mb-4 focus:outline-none focus:ring-2 focus:ring-green-500 tech-font"
                        placeholder="Örn: Bir robot hastanede"
                        data-lang-placeholder-key="scenario_placeholder"
                    >
                    <button 
                        id="analyze-scenario-btn" 
                        class="bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg px-6 py-3 w-full font-medium shadow-sm hover:from-green-600 hover:to-emerald-600 transition-all tech-font"
                        data-lang-key="analyze_scenario_button"
                    >
                        ANALİZ ET ✨
                    </button>
                    <div id="ai-scenario-output" class="mt-4 p-4 bg-slate-800 rounded-lg border border-emerald-500 text-emerald-200 min-h-[120px] overflow-auto">
                        <p id="scenario-analysis-text" data-lang-key="scenario_analysis_placeholder">Yapay zeka bu senaryoda ne yapabilir?</p>
                        <div id="scenario-loading-indicator" class="hidden sound-wave ml-4 justify-center mt-4">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-slate-700">
                <h2 class="text-xl font-semibold text-cyan-300 tech-font mb-4" data-lang-key="ai_fun_fact_title">✨ Yapay Zeka Eğlenceli Bilgi</h2>
                <div class="bg-slate-900 p-6 rounded-xl border border-orange-500 shadow-lg">
                    <button 
                        id="generate-fun-fact-btn" 
                        class="bg-gradient-to-r from-orange-500 to-yellow-500 text-white rounded-lg px-6 py-3 w-full font-medium shadow-sm hover:from-orange-600 hover:to-yellow-600 transition-all tech-font"
                        data-lang-key="generate_fun_fact_button"
                    >
                        EĞLENCELİ BİLGİ OLUŞTUR ✨
                    </button>
                    <div id="ai-fun-fact-output" class="mt-4 p-4 bg-slate-800 rounded-lg border border-yellow-500 text-yellow-200 min-h-[80px] flex items-center justify-center text-center">
                        <p id="fun-fact-text" data-lang-key="fun_fact_placeholder">Yapay zeka hakkında eğlenceli bir bilgi burada belirecek...</p>
                        <div id="fun-fact-loading-indicator" class="hidden sound-wave ml-4">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-slate-700">
                <h2 class="text-xl font-semibold text-cyan-300 tech-font mb-4" data-lang-key="ai_invention_title">✨ Yapay Zeka İcat Fikri</h2>
                <div class="bg-slate-900 p-6 rounded-xl border border-red-500 shadow-lg">
                    <label for="invention-topic-input" class="block text-cyan-300 mb-2 tech-font" data-lang-key="invention_topic_prompt">
                        Hangi konuda icat fikri istersin?
                    </label>
                    <input 
                        type="text" 
                        id="invention-topic-input" 
                        class="bg-slate-800 text-cyan-300 border border-red-500 rounded-lg p-3 w-full mb-4 focus:outline-none focus:ring-2 focus:ring-red-500 tech-font"
                        placeholder="Örn: evcil hayvanlar, çevre, oyunlar"
                        data-lang-placeholder-key="invention_topic_placeholder"
                    >
                    <button 
                        id="generate-invention-btn" 
                        class="bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg px-6 py-3 w-full font-medium shadow-sm hover:from-red-600 hover:to-pink-600 transition-all tech-font"
                        data-lang-key="generate_invention_button"
                    >
                        İCAT FİKRİ OLUŞTUR ✨
                    </button>
                    <div id="ai-invention-output" class="mt-4 p-4 bg-slate-800 rounded-lg border border-pink-500 text-pink-200 min-h-[120px] overflow-auto">
                        <p id="invention-text" data-lang-key="invention_placeholder">Yapay zeka icat fikrin burada belirecek...</p>
                        <div id="invention-loading-indicator" class="hidden sound-wave ml-4 justify-center mt-4">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div id="riddle-screen" class="max-w-5xl mx-auto hidden">
        <div class="bg-slate-800 bg-opacity-90 rounded-3xl p-6 md:p-8 shadow-xl tech-bg glow">
            <div class="flex flex-col items-center justify-center py-8">
                <h1 class="tech-font text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-6" data-lang-key="riddle_title">
                    YAPAY ZEKA BİLMECELERİ
                </h1>
                <p class="text-cyan-300 text-center mb-6" data-lang-key="riddle_intro">
                    Yapay zeka bilginizi test etme zamanı! Aşağıdaki bilmeceyi çözebilir misin?
                </p>
                <div class="w-full max-w-md bg-slate-900 p-6 rounded-xl border border-purple-500 shadow-lg">
                    <p id="riddle-question" class="text-purple-300 text-lg mb-4 text-center">
                        </p>
                    <input 
                        type="text" 
                        id="riddle-answer-input" 
                        class="bg-slate-800 text-purple-300 border border-purple-500 rounded-lg p-3 w-full mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500 tech-font"
                        placeholder="Cevabını buraya yaz..."
                        data-lang-placeholder-key="riddle_input_placeholder"
                    >
                    <button 
                        id="submit-riddle-answer" 
                        class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg px-6 py-3 w-full font-medium shadow-sm hover:from-purple-600 hover:to-pink-600 transition-all tech-font"
                        data-lang-key="answer_button"
                    >
                        CEVAPLA
                    </button>
                    <p id="riddle-feedback" class="text-center mt-4 font-bold"></p>
                    <div id="riddle-loading-indicator" class="hidden sound-wave ml-4 justify-center mt-4">
                        <span></span><span></span><span></span><span></span><span></span>
                        </div>
                </div>
                <div class="mt-6 flex flex-col sm:flex-row justify-between w-full max-w-md space-y-4 sm:space-y-0">
                    <button id="btn-prev-riddle" class="btn-nav bg-slate-900 text-purple-400 border border-purple-700 rounded-lg px-5 py-2 font-medium shadow-sm hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed tech-font">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span data-lang-key="prev_button">ÖNCEKİ</span>
                    </button>
                    <span class="bg-gradient-to-r from-purple-900 to-pink-900 text-white py-2 px-4 rounded-full text-sm font-bold tech-font">
                        <span data-lang-key="riddle_count_label">BİLMECE</span>: <span id="riddle-count">0</span>/3
                    </span>
                    <button id="btn-next-riddle" class="btn-nav bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg px-5 py-2 font-medium shadow-sm hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed tech-font">
                        <span data-lang-key="next_button">SONRAKİ</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline ml-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4-4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="matching-game-screen" class="max-w-5xl mx-auto hidden">
        <div class="bg-slate-800 bg-opacity-90 rounded-3xl p-6 md:p-8 shadow-xl tech-bg glow">
            <div class="flex flex-col items-center justify-center py-8">
                <h1 class="tech-font text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-400 mb-6" data-lang-key="matching_game_title">
                    EŞLEŞTİRME OYUNU
                </h1>
                <p class="text-cyan-300 text-center mb-6" data-lang-key="matching_game_intro">
                    Kartları çevir ve aynı kavramları eşleştir!
                </p>
                <div id="matching-grid" class="matching-grid w-full max-w-2xl">
                    </div>
                <p id="matching-feedback" class="text-center mt-4 font-bold text-green-400"></p>
                <div class="mt-6 flex flex-col sm:flex-row justify-center w-full max-w-md space-y-4 sm:space-y-0 sm:space-x-4">
                    <button id="btn-reset-matching" class="btn-nav bg-slate-900 text-green-400 border border-green-700 rounded-lg px-5 py-2 font-medium shadow-sm hover:bg-slate-800 tech-font">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                        </svg>
                        <span data-lang-key="reset_matching_button">YENİDEN BAŞLA</span>
                    </button>
                    <button id="btn-complete-matching" class="hidden ml-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg px-8 py-3 font-medium shadow-lg hover:from-green-700 hover:to-emerald-700 tech-font">
                        <span class="relative inline-block" data-lang-key="get_certificate_button">
                            SERTİFİKANI AL!
                            <span class="absolute top-0 right-0 -mt-2 -mr-2 bg-yellow-400 text-xs rounded-full h-5 w-5 flex items-center justify-center">
                                🌟
                            </span>
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="certificate-screen" class="max-w-5xl mx-auto hidden">
        <div class="certificate p-8 rounded-3xl shadow-2xl flex flex-col items-center justify-center text-center relative h-[600px] md:h-[700px]">
            <div class="flex justify-between items-center w-full mb-6 absolute top-4 left-0 px-8">
                <button id="btn-back-to-game" class="bg-slate-800 text-cyan-400 border border-cyan-700 rounded-lg px-4 py-2 font-medium shadow-sm hover:bg-slate-700 tech-font">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                    </svg>
                    <span data-lang-key="back_to_game">GERİ DÖN</span>
                </button>
                <button id="btn-print-certificate" class="bg-slate-800 text-cyan-400 border border-cyan-700 rounded-lg px-4 py-2 font-medium shadow-sm hover:bg-slate-700 tech-font">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5 4V2a2 2 0 012-2h6a2 2 0 012 2v2h2a2 2 0 012 2v7a2 2 0 01-2 2H3a2 2 0 01-2-2V6a2 2 0 012-2h2zm0 2h10v7a1 1 0 001 1H4a1 1 0 00-1 1V6h2zm6 10a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd" />
                    </svg>
                    <span data-lang-key="print_certificate">YAZDIR</span>
                </button>
            </div>

            <div class="flex flex-col items-center justify-center flex-grow py-12">
                <h1 class="tech-font text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 mb-6 drop-shadow-lg" data-lang-key="certificate_main_title">
                    YAPAY ZEKADA UZMANLIK SERTİFİKASI
                </h1>
                <p class="text-xl md:text-2xl text-white mb-4" data-lang-key="certificate_honored">Bu sertifika ile onurlandırılmıştır:</p>
                <p id="certificate-user-name" class="tech-font text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400 mb-8 drop-shadow-lg">
                    [KULLANICI ADI]
                </p>
                <p class="text-lg md:text-xl text-white mb-8" id="certificate-message">
                    </p>
                <div class="flex items-center space-x-4 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-lg font-semibold" data-lang-key="congratulations">Tebrikler!</span>
                </div>
            </div>
            <p class="text-sm text-slate-400 mt-auto">
                <span data-lang-key="date_issued">Veriliş Tarihi:</span> <span id="certificate-date"></span>
            </p>
        </div>
    </div>

    <script>
        // DOM element references
        const welcomeScreen = document.getElementById('welcome-screen');
        const gameScreen = document.getElementById('game-screen');
        const riddleScreen = document.getElementById('riddle-screen');
        const matchingGameScreen = document.getElementById('matching-game-screen');
        const certificateScreen = document.getElementById('certificate-screen');

        const startAdventureBtn = document.getElementById('start-adventure');
        const userNameInput = document.getElementById('user-name');
        const userNameDisplay = document.getElementById('user-name-display');
        const certificateUserName = document.getElementById('certificate-user-name');
        const certificateDate = document.getElementById('certificate-date');
        const certificateMessage = document.getElementById('certificate-message');

        // Language Toggle
        const langToggleTr = document.getElementById('lang-toggle-tr');
        const langToggleEn = document.getElementById('lang-toggle-en');

        // Learning Card elements
        const currentCardElement = document.getElementById('current-card');
        const cardFrontTitle = document.getElementById('card-front-title');
        const cardFrontText = document.getElementById('card-front-text');
        const cardFrontSvg = document.getElementById('card-front-svg');
        const cardBackTitle = document.getElementById('card-back-title');
        const cardBackText = document.getElementById('card-back-text');
        const cardBadge = document.getElementById('card-badge');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');
        const btnKnown = document.getElementById('btn-known');
        const btnUnknown = document.getElementById('btn-unknown');

        // Ask Robi elements
        const robiQuestionInput = document.getElementById('robi-question-input');
        const askRobiBtn = document.getElementById('ask-robi-btn');
        const robiAnswer = document.getElementById('robi-answer');
        const robiLoadingIndicator = document.getElementById('robi-loading-indicator');

        // AI Story Generator elements
        const storyKeywordsInput = document.getElementById('story-keywords-input');
        const generateStoryBtn = document.getElementById('generate-story-btn');
        const storyText = document.getElementById('story-text');
        const storyLoadingIndicator = document.getElementById('story-loading-indicator');

        // "What Does This AI Do?" Scenario Generator elements
        const scenarioInput = document.getElementById('scenario-input');
        const analyzeScenarioBtn = document.getElementById('analyze-scenario-btn');
        const scenarioAnalysisText = document.getElementById('scenario-analysis-text');
        const scenarioLoadingIndicator = document.getElementById('scenario-loading-indicator');

        // New: AI Fun Fact Generator elements
        const generateFunFactBtn = document.getElementById('generate-fun-fact-btn');
        const funFactText = document.getElementById('fun-fact-text');
        const funFactLoadingIndicator = document.getElementById('fun-fact-loading-indicator');

        // New: AI Invention Idea Generator elements
        const inventionTopicInput = document.getElementById('invention-topic-input');
        const generateInventionBtn = document.getElementById('generate-invention-btn');
        const inventionText = document.getElementById('invention-text');
        const inventionLoadingIndicator = document.getElementById('invention-loading-indicator');

        // Riddle elements
        const riddleQuestion = document.getElementById('riddle-question');
        const riddleAnswerInput = document.getElementById('riddle-answer-input');
        const submitRiddleAnswerBtn = document.getElementById('submit-riddle-answer');
        const riddleFeedback = document.getElementById('riddle-feedback');
        const btnPrevRiddle = document.getElementById('btn-prev-riddle');
        const btnNextRiddle = document.getElementById('btn-next-riddle');
        const riddleCountDisplay = document.getElementById('riddle-count');
        const riddleLoadingIndicator = document.getElementById('riddle-loading-indicator');

        // Matching Game elements
        const matchingGrid = document.getElementById('matching-grid');
        const matchingFeedback = document.getElementById('matching-feedback');
        const btnResetMatching = document.getElementById('btn-reset-matching');
        const btnCompleteMatching = document.getElementById('btn-complete-matching');

        // Overall progress elements
        const overallProgressCountDisplay = document.getElementById('overall-progress-count');
        const overallTotalCountDisplay = document.getElementById('overall-total-count');
        const progressBar = document.getElementById('progress-bar');
        const progressPercent = document.getElementById('progress-percent');
        const statsKnown = document.getElementById('stats-known');
        const statsUnknown = document.getElementById('stats-unknown');
        const statsRemaining = document.getElementById('stats-remaining');
        const btnReset = document.getElementById('btn-reset');
        // Removed: const btnComplete = document.getElementById('btn-complete'); 

        const starsContainer = document.getElementById('stars');

        // Game state variables
        let userName = '';
        let currentSection = 'learning'; // 'learning', 'riddles', 'matching'
        let currentCardIndex = 0;
        let currentRiddleIndex = 0;
        let currentLanguage = 'tr'; // Default language

        let knownCards = new Set(); // Stores indices of learning cards marked as "Anladım"
        let unknownCards = new Set(); // Stores indices of learning cards marked as "Tekrar"
        let solvedRiddles = new Set(); // Stores indices of solved riddles
        let matchedPairs = new Set(); // Stores IDs of matched pairs in matching game

        // Matching game specific state
        let flippedCards = [];
        let lockBoard = false;

        // Translations object
        const translations = {
            'tr': {
                'welcome_title': 'YAPAY ZEKA MACERASI',
                'welcome_intro': 'Merhaba genç kaşif! Yapay zeka dünyasına heyecan verici bir yolculuğa çıkmaya hazır mısın?',
                'enter_name': 'İSMİNİ GİR:',
                'name_placeholder': 'Adın ve Soyadın',
                'start_button': 'BAŞLA',
                'name_hint': '* İsmin sertifikanda görünecek',
                'learn_title': 'ÖĞREN',
                'learn_text': 'Yapay zeka hakkında eğlenceli hikayeler ve açıklamalarla yeni bilgiler öğren.',
                'explore_title': 'KEŞFET',
                'explore_text': 'Robotlar ve yapay zeka dünyasını interaktif kartlarla keşfet.',
                'certificate_title': 'SERTİFİKA',
                'certificate_text': 'Tüm kartları tamamla ve kendi özel yapay zeka sertifikanı kazan!',
                'hello_explorer': 'Merhaba',
                'ready_to_explore': '! Yapay zeka dünyasını keşfetmeye hazır mısın?',
                'progress': 'İLERLEME',
                'progress_bar_label': 'İLERLEME ÇUBUĞU',
                'child_friendly': 'ÇOCUK DOSTU',
                'concept': 'KAVRAM',
                'flip_card_hint': 'HİKAYEYİ OKUMAK İÇİN KARTI ÇEVİR',
                'prev_button': 'ÖNCEKİ',
                'next_button': 'SONRAKİ',
                'understood_button': 'ANLADIM',
                'repeat_button': 'TEKRAR',
                'learning_stats': 'ÖĞRENME İSTATİSTİKLERİ',
                'total_cards': 'TOPLAM KART',
                'understood': 'ANLAŞILAN',
                'to_repeat': 'TEKRAR EDİLECEK',
                'remaining': 'KALAN',
                'reset_button': 'SIFIRLA',
                'ask_robi_title': '✨ Robi\'ye Soru Sor',
                'ask_robi_prompt': 'Yapay zeka hakkında bir soru sor:',
                'ask_robi_placeholder': 'Örn: Robotlar rüya görür mü?',
                'ask_robi_button': 'SOR ✨',
                'robi_thinking': 'Robi düşünüyor...',
                'robi_answer_placeholder': 'Robi\'nin cevabını bekliyorum...',
                'robi_no_question': 'Lütfen bir soru yaz!',
                'robi_api_error': 'Üzgünüm, şu an cevap veremiyorum. Daha sonra tekrar dene.',
                'ai_story_generator_title': '✨ Yapay Zeka Hikaye Oluşturucu',
                'story_keywords_prompt': 'Hikayende hangi anahtar kelimeler olsun? (virgülle ayır)',
                'story_keywords_placeholder': 'Örn: robot, uzay, arkadaşlık',
                'generate_story_button': 'HİKAYE OLUŞTUR ✨',
                'story_placeholder': 'Hikayen burada belirecek...',
                'story_no_keywords': 'Lütfen hikaye oluşturmak için anahtar kelimeler girin!',
                'story_loading': 'Hikaye oluşturuluyor...',
                'story_api_error': 'Hikaye oluşturulurken bir hata oluştu. Lütfen tekrar dene.',
                'ai_scenario_title': '✨ Yapay Zeka Ne Yapar?',
                'scenario_prompt': 'Bir senaryo yaz:',
                'scenario_placeholder': 'Örn: Bir robot hastanede',
                'analyze_scenario_button': 'ANALİZ ET ✨',
                'scenario_analysis_placeholder': 'Yapay zeka bu senaryoda ne yapabilir?',
                'scenario_no_input': 'Lütfen bir senaryo yazın!',
                'scenario_loading': 'Senaryo analiz ediliyor...',
                'scenario_api_error': 'Senaryo analiz edilirken bir hata oluştu. Lütfen tekrar dene.',
                'ai_fun_fact_title': '✨ Yapay Zeka Eğlenceli Bilgi',
                'generate_fun_fact_button': 'EĞLENCELİ BİLGİ OLUŞTUR ✨',
                'fun_fact_placeholder': 'Yapay zeka hakkında eğlenceli bir bilgi burada belirecek...',
                'fun_fact_loading': 'Eğlenceli bilgi oluşturuluyor...',
                'fun_fact_api_error': 'Eğlenceli bilgi oluşturulurken bir hata oluştu. Lütfen tekrar dene.',
                'ai_invention_title': '✨ Yapay Zeka İcat Fikri',
                'invention_topic_prompt': 'Hangi konuda icat fikri istersin?',
                'invention_topic_placeholder': 'Örn: evcil hayvanlar, çevre, oyunlar',
                'generate_invention_button': 'İCAT FİKRİ OLUŞTUR ✨',
                'invention_placeholder': 'Yapay zeka icat fikrin burada belirecek...',
                'invention_loading': 'İcat fikri oluşturuluyor...',
                'invention_no_topic': 'Lütfen bir icat konusu girin!',
                'invention_api_error': 'İcat fikri oluşturulurken bir hata oluştu. Lütfen tekrar dene.',
                'riddle_title': 'YAPAY ZEKA BİLMECELERİ',
                'riddle_intro': 'Yapay zeka bilginizi test etme zamanı! Aşağıdaki bilmeceyi çözebilir misin?',
                'riddle_input_placeholder': 'Cevabını buraya yaz...',
                'answer_button': 'CEVAPLA',
                'riddle_correct': 'Doğru! Harikasın!',
                'riddle_incorrect': 'Yanlış cevap. Tekrar dene!',
                'riddle_loading': 'Bilmeceler yükleniyor...',
                'riddle_load_error': 'Bilmeceler yüklenemedi. Lütfen tekrar deneyin.',
                'riddle_api_error': 'Bilmeceler yüklenirken bir hata oluştu.',
                'riddle_count_label': 'BİLMECE',
                'proceed_to_matching': 'EŞLEŞTİRME OYUNUNA GEÇ',
                'matching_game_title': 'EŞLEŞTİRME OYUNU',
                'matching_game_intro': 'Kartları çevir ve aynı kavramları eşleştir!',
                'matching_matched': 'Eşleşti!',
                'matching_not_matched': 'Eşleşmedi, tekrar dene!',
                'matching_all_matched': 'Tebrikler! Tüm çiftleri eşleştirdin!',
                'reset_matching_button': 'YENİDEN BAŞLA',
                'get_certificate_button': 'SERTİFİKANI AL!',
                'certificate_main_title': 'YAPAY ZEKADA UZMANLIK SERTİFİKASI',
                'certificate_honored': 'Bu sertifika ile onurlandırılmıştır:',
                'certificate_completion_text': 'Yapay zeka macera derslerini başarıyla tamamladığı için.',
                'congratulations': 'Tebrikler!',
                'date_issued': 'Veriliş Tarihi:',
                'back_to_game': 'GERİ DÖN',
                'print_certificate': 'YAZDIR',
                'certificate_message_loading': 'Mesajınız oluşturuluyor...',
                'certificate_message_default': 'Tebrikler! Yapay zeka maceranı başarıyla tamamladın!',
                'confirm_reset': 'Tüm ilerlemenizi sıfırlamak istediğinizden emin misiniz?'
            },
            'en': {
                'welcome_title': 'AI ADVENTURE',
                'welcome_intro': 'Hello young explorer! Are you ready for an exciting journey into the world of artificial intelligence?',
                'enter_name': 'ENTER YOUR NAME:',
                'name_placeholder': 'Your Name and Surname',
                'start_button': 'START',
                'name_hint': '* Your name will appear on your certificate',
                'learn_title': 'LEARN',
                'learn_text': 'Learn new things about artificial intelligence with fun stories and explanations.',
                'explore_title': 'EXPLORE',
                'explore_text': 'Explore the world of robots and artificial intelligence with interactive cards.',
                'certificate_title': 'CERTIFICATE',
                'certificate_text': 'Complete all cards and earn your special AI certificate!',
                'hello_explorer': 'Hello',
                'ready_to_explore': '! Are you ready to explore the world of artificial intelligence?',
                'progress': 'PROGRESS',
                'progress_bar_label': 'PROGRESS BAR',
                'child_friendly': 'CHILD FRIENDLY',
                'concept': 'CONCEPT',
                'flip_card_hint': 'FLIP THE CARD TO READ THE STORY',
                'prev_button': 'PREVIOUS',
                'next_button': 'NEXT',
                'understood_button': 'UNDERSTOOD',
                'repeat_button': 'REPEAT',
                'learning_stats': 'LEARNING STATISTICS',
                'total_cards': 'TOTAL CARDS',
                'understood': 'UNDERSTOOD',
                'to_repeat': 'TO REPEAT',
                'remaining': 'REMAINING',
                'reset_button': 'RESET',
                'ask_robi_title': '✨ Ask Robi',
                'ask_robi_prompt': 'Ask a question about artificial intelligence:',
                'ask_robi_placeholder': 'Ex: Do robots dream?',
                'ask_robi_button': 'ASK ✨',
                'robi_thinking': 'Robi is thinking...',
                'robi_answer_placeholder': 'Waiting for Robi\'s answer...',
                'robi_no_question': 'Please write a question!',
                'robi_api_error': 'Sorry, I cannot answer right now. Please try again later.',
                'ai_story_generator_title': '✨ AI Story Generator',
                'story_keywords_prompt': 'What keywords should be in your story? (separate with commas)',
                'story_keywords_placeholder': 'Ex: robot, space, friendship',
                'generate_story_button': 'GENERATE STORY ✨',
                'story_placeholder': 'Your story will appear here...',
                'story_no_keywords': 'Please enter keywords to generate a story!',
                'story_loading': 'Generating story...',
                'story_api_error': 'An error occurred while generating the story. Please try again.',
                'ai_scenario_title': '✨ What Does This AI Do?',
                'scenario_prompt': 'Write a scenario:',
                'scenario_placeholder': 'Ex: A robot in a hospital',
                'analyze_scenario_button': 'ANALYZEN ✨',
                'scenario_analysis_placeholder': 'What can AI do in this scenario?',
                'scenario_no_input': 'Please write a scenario!',
                'scenario_loading': 'Analyzing scenario...',
                'scenario_api_error': 'An error occurred while analyzing the scenario. Please try again.',
                'ai_fun_fact_title': '✨ AI Fun Fact',
                'generate_fun_fact_button': 'GENERATE FUN FACT ✨',
                'fun_fact_placeholder': 'A fun fact about AI will appear here...',
                'fun_fact_loading': 'Generating fun fact...',
                'fun_fact_api_error': 'An error occurred while generating the fun fact. Please try again.',
                'ai_invention_title': '✨ AI Invention Idea',
                'invention_topic_prompt': 'What topic would you like an invention idea for?',
                'invention_topic_placeholder': 'Ex: pets, environment, games',
                'generate_invention_button': 'GENERATE INVENTION IDEA ✨',
                'invention_placeholder': 'Your AI invention idea will appear here...',
                'invention_loading': 'Generating invention idea...',
                'invention_no_topic': 'Please enter an invention topic!',
                'invention_api_error': 'An error occurred while generating the invention idea. Please try again.',
                'riddle_title': 'AI RIDDLES',
                'riddle_intro': 'Time to test your AI knowledge! Can you solve the riddle below?',
                'riddle_input_placeholder': 'Type your answer here...',
                'answer_button': 'ANSWER',
                'riddle_correct': 'Correct! Amazing!',
                'riddle_incorrect': 'Wrong answer. Try again!',
                'riddle_loading': 'Riddles are loading...',
                'riddle_load_error': 'Could not load riddles. Please try again.',
                'riddle_api_error': 'An error occurred while loading riddles.',
                'riddle_count_label': 'RIDDLE',
                'proceed_to_matching': 'PROCEED TO MATCHING GAME',
                'matching_game_title': 'MATCHING GAME',
                'matching_game_intro': 'Flip the cards and match the same concepts!',
                'matching_matched': 'Matched!',
                'matching_not_matched': 'Not matched, try again!',
                'matching_all_matched': 'Congratulations! You matched all pairs!',
                'reset_matching_button': 'RESTART',
                'get_certificate_button': 'GET YOUR CERTIFICATE!',
                'certificate_main_title': 'CERTIFICATE OF EXPERTISE IN AI',
                'certificate_honored': 'This certificate is honored to:',
                'certificate_completion_text': 'For successfully completing the artificial intelligence adventure lessons.',
                'congratulations': 'Congratulations!',
                'date_issued': 'Date Issued:',
                'back_to_game': 'GO BACK',
                'print_certificate': 'PRINT',
                'certificate_message_loading': 'Generating your message...',
                'certificate_message_default': 'Congratulations! You have successfully completed your AI adventure!',
                'confirm_reset': 'Are you sure you want to reset all your progress?'
            }
        };

        // AI Concepts data (learning cards)
        const aiConcepts = [
            {
                title: "Yapay Zeka Nedir?",
                text: "Merhaba! Ben Robot Robi. Yapay zeka, bilgisayarların insanlar gibi düşünmesini ve öğrenmesini sağlayan bir teknolojidir. Benim gibi robotlar, yapay zeka sayesinde seninle konuşabilir ve sorularını yanıtlayabilir.",
                storyTitle: "Robot Robi'nin Macerası",
                storyText: "Bir zamanlar, küçük bir robot olan Robi vardı. Robi, yapay zeka sayesinde her gün yeni şeyler öğreniyordu. Bir gün, bir çocuk ona \"2+2 kaç eder?\" diye sordu. Robi hemen \"4!\" diye cevap verdi. Sonra çocuk \"Peki, en sevdiğin renk ne?\" diye sordu. Robi düşündü ve \"Henüz bir renge karar vermedim, çünkü hala öğreniyorum!\" dedi. Yapay zeka, Robi'nin sorulara cevap vermesini ve yeni bilgiler öğrenmesini sağlıyordu. Tıpkı senin okulda öğrendiğin gibi, Robi de her gün yeni şeyler öğreniyor ve daha akıllı hale geliyordu.",
                svg: `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40">
                        <circle cx="100" cy="70" r="40" fill="#38bdf8" opacity="0.2" />
                        <circle cx="85" cy="60" r="8" fill="#38bdf8" class="robot-eye" />
                        <circle cx="115" cy="60" r="8" fill="#38bdf8" class="robot-eye" />
                        <path d="M85 85 Q100 100 115 85" stroke="#38bdf8" stroke-width="3" fill="none" />
                        <rect x="60" y="110" width="80" height="60" rx="10" fill="#38bdf8" opacity="0.2" />
                        <rect x="70" y="125" width="60" height="10" rx="5" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="145" width="40" height="10" rx="5" fill="#38bdf8" opacity="0.5" />
                        <circle cx="70" cy="40" r="10" fill="#a855f7" opacity="0.3" />
                        <circle cx="130" cy="40" r="10" fill="#a855f7" opacity="0.3" />
                        <path d="M70 40 Q100 10 130 40" stroke="#a855f7" stroke-width="5" fill="none" opacity="0.3" />
                    </svg>
                `
            },
            {
                title: "Robotlar Nasıl Öğrenir?",
                text: "Robotlar, tıpkı senin gibi, deneyimlerden öğrenirler. Onlara ne kadar çok bilgi verirsek ve ne kadar çok pratik yaparlarsa, o kadar akıllı olurlar. Buna 'Makine Öğrenmesi' denir.",
                storyTitle: "Akıllı Köpek Robi",
                storyText: "Robi'nin yeni arkadaşı, bir robot köpek olan Data'ydı. Data, etraftaki eşyaları tanımayı öğreniyordu. İlk başta bir topu ve bir ayakkabıyı ayırt edemiyordu. Ama Robi ona sürekli 'Bu top, bu ayakkabı!' diye gösterdi. Data, her doğru bildiğinde 'Harika!' sesi duyuyordu. Zamanla Data, topu gördüğünde havlamayı, ayakkabıyı gördüğünde ise sessiz kalmayı öğrendi. Bu, Data'nın makine öğrenmesi sayesinde akıllanmasıydı!",
                svg: `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40">
                        <path d="M100 20 C130 20, 140 50, 120 70 L120 130 C140 150, 130 180, 100 180 C70 180, 60 150, 80 130 L80 70 C60 50, 70 20, 100 20 Z" fill="#a855f7" opacity="0.2" />
                        <circle cx="85" cy="60" r="8" fill="#a855f7" class="robot-eye" />
                        <circle cx="115" cy="60" r="8" fill="#a855f7" class="robot-eye" />
                        <path d="M85 85 Q100 100 115 85" stroke="#a855f7" stroke-width="3" fill="none" />
                        <rect x="70" y="140" width="60" height="10" rx="5" fill="#a855f7" opacity="0.5" />
                        <circle cx="70" cy="160" r="10" fill="#38bdf8" opacity="0.3" />
                        <circle cx="130" cy="160" r="10" fill="#38bdf8" opacity="0.3" />
                        <path d="M70 160 Q100 190 130 160" stroke="#38bdf8" stroke-width="5" fill="none" opacity="0.3" />
                    </svg>
                `
            },
            {
                title: "Yapay Zeka Nelerde Kullanılır?",
                text: "Yapay zeka hayatımızın birçok yerinde var! Akıllı telefonlarımızda, oyunlarda, hatta arabalarda bile bize yardımcı oluyor. Örneğin, seni doğru yere götüren navigasyon uygulamaları yapay zeka kullanır.",
                storyTitle: "Akıllı Telefon Macerası",
                storyText: "Robi, akıllı telefonunda yeni bir oyun oynuyordu. Oyun, Robi'nin hareketlerini öğreniyor ve ona göre daha zorlu görevler veriyordu. Sonra annesiyle konuşmak için telefonunu kullandı. Telefon, annesinin sesini tanıyıp arama yapabiliyordu! Robi, 'Vay canına, yapay zeka ne kadar da çok şeye yarıyor!' diye düşündü. Akıllı telefonlar, yapay zeka sayesinde sesimizi tanıyıp, fotoğrafları düzenleyip, hatta bize yeni oyunlar önerebiliyor.",
                svg: `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40">
                        <rect x="50" y="30" width="100" height="140" rx="15" fill="#38bdf8" opacity="0.2" />
                        <rect x="60" y="40" width="80" height="100" rx="5" fill="#0f172a" />
                        <circle cx="100" cy="155" r="7" fill="#a855f7" />
                        <rect x="70" y="50" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="60" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="70" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="80" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="90" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="100" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <rect x="70" y="110" width="60" height="5" rx="2" fill="#38bdf8" opacity="0.5" />
                        <circle cx="100" cy="100" r="40" stroke="#a855f7" stroke-width="2" fill="none" opacity="0.3" />
                        <path d="M80 120 L100 135 L120 120" stroke="#a855f7" stroke-width="3" fill="none" opacity="0.3" />
                    </svg>
                `
            },
            {
                title: "Gelecekte Yapay Zeka",
                text: "Gelecekte yapay zeka daha da gelişecek! Belki de kendi kendine giden arabalar, hastalıkları teşhis eden robot doktorlar veya uzayı keşfeden akıllı uzay gemileri göreceğiz. Hayal gücümüzün sınırı yok!",
                storyTitle: "Uzay Macerası",
                storyText: "Robi, bir uzay gemisinde yapay zeka pilotu olarak görev yapıyordu. Geminin bilgisayarı, Robi'ye en güvenli rota hakkında bilgi veriyor, hatta uzaydaki yeni gezegenleri keşfetmesine yardımcı oluyordu. Bir gün, bilinmeyen bir gezegene indiler. Yapay zeka, gezegenin havasını analiz etti ve Robi'ye güvenli olduğunu söyledi. Robi, 'Yapay zeka olmasaydı, bu kadar uzağa asla gidemezdik!' diye düşündü. Gelecekte yapay zeka, bizi daha önce hiç gitmediğimiz yerlere götürebilir ve bilmediğimiz şeyleri keşfetmemize yardımcı olabilir.",
                svg: `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40">
                        <path d="M50 150 L100 50 L150 150 Z" fill="#38bdf8" opacity="0.2" />
                        <circle cx="100" cy="100" r="30" fill="#a855f7" opacity="0.2" />
                        <path d="M70 120 Q100 100 130 120" stroke="#38bdf8" stroke-width="3" fill="none" />
                        <circle cx="90" cy="90" r="5" fill="#a855f7" />
                        <circle cx="110" cy="90" r="5" fill="#a855f7" />
                        <rect x="95" y="105" width="10" height="20" fill="#a855f7" opacity="0.5" />
                        <path d="M100 50 L100 20" stroke="#a855f7" stroke-width="5" stroke-linecap="round" opacity="0.3" />
                        <path d="M50 150 L30 170" stroke="#a855f7" stroke-width="5" stroke-linecap="round" opacity="0.3" />
                        <path d="M150 150 L170 170" stroke="#a855f7" stroke-width="5" stroke-linecap="round" opacity="0.3" />
                    </svg>
                `
            },
            {
                title: "Yapay Zeka ve Biz",
                text: "Yapay zeka, dünyayı daha iyi bir yer haline getirmemize yardımcı olabilir. Ama en önemlisi, biz insanlar olarak yapay zekayı nasıl kullanacağımıza karar vermeliyiz. İyi amaçlar için kullanırsak, harika şeyler başarabiliriz!",
                storyTitle: "Dünyayı Kurtaran Yapay Zeka",
                storyText: "Robi, bir gün dünyayı kurtarmak için yapay zekayı kullanmaya karar verdi. Bir ormanda çıkan yangını durdurmak için yapay zeka destekli dronları gönderdi. Dronlar, yangının nerede olduğunu ve nasıl yayıldığını hızlıca tespit etti. Robi, bu bilgileri itfaiyecilere iletti ve yangın kısa sürede söndürüldü. Robi, 'Yapay zeka, doğru ellerde olduğunda gerçek bir süper kahraman olabilir!' diye düşündü. Yapay zeka, doğal afetlerle mücadele etmek, enerji tasarrufu sağlamak ve hatta yeni ilaçlar geliştirmek gibi birçok alanda bize yardımcı olabilir. Önemli olan, onu her zaman iyi niyetle kullanmaktır.",
                svg: `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40">
                        <circle cx="100" cy="100" r="80" fill="#38bdf8" opacity="0.1" />
                        <circle cx="100" cy="100" r="60" fill="#a855f7" opacity="0.1" />
                        <circle cx="100" cy="100" r="40" fill="#38bdf8" opacity="0.2" />
                        <path d="M100 20 L120 40 L100 60 L80 40 Z" fill="#a855f7" />
                        <path d="M100 180 L120 160 L100 140 L80 160 Z" fill="#a855f7" />
                        <path d="M20 100 L40 120 L60 100 L40 80 Z" fill="#a855f7" />
                        <path d="M180 100 L160 120 L140 100 L160 80 Z" fill="#a855f7" />
                        <line x1="100" y1="60" x2="100" y2="140" stroke="#38bdf8" stroke-width="5" stroke-linecap="round" opacity="0.5" />
                        <line x1="60" y1="100" x2="140" y2="100" stroke="#38bdf8" stroke-width="5" stroke-linecap="round" opacity="0.5" />
                        <circle cx="100" cy="100" r="10" fill="#38bdf8" class="pulse" />
                    </svg>
                `
            }
        ];

        // Riddles data - now with prompts for LLM
        const riddles = [
            {
                prompt: "Çocuklar için yapay zeka hakkında basit bir bilmece oluştur. Cevabı tek kelime olmalı.",
                answer: "yapay zeka"
            },
            {
                prompt: "Makine öğrenmesi kavramını anlatan bir bilmece yaz. Cevabı tek kelime olmalı.",
                answer: "makine öğrenmesi"
            },
            {
                prompt: "Robotların ne olduğunu anlatan, çocuklara yönelik bir bilmece oluştur. Cevabı tek kelime olmalı.",
                answer: "robot"
            }
        ];

        // Matching game data (pairs of concept and description)
        const matchingPairs = [
            { id: 1, concept: "Yapay Zeka", description: "Bilgisayarların insanlar gibi düşünmesini sağlar." },
            { id: 2, concept: "Makine Öğrenmesi", description: "Robotların deneyimlerden öğrenmesidir." },
            { id: 3, concept: "Robot", description: "Yapay zeka ile çalışan bir makine." },
            { id: 4, concept: "Algoritma", description: "Bir problemi çözmek için adım adım talimatlar." },
            { id: 5, concept: "Veri", description: "Yapay zekanın öğrenmek için kullandığı bilgiler." },
            { id: 6, concept: "Sensör", description: "Robotların çevreyi algılamasına yardımcı olan araç." }
        ];

        // Overall progress calculation
        const totalLearningCards = aiConcepts.length;
        const totalRiddles = riddles.length;
        const totalMatchingPairs = matchingPairs.length; // Number of pairs
        const overallTotalProgressItems = totalLearningCards + totalRiddles + totalMatchingPairs; // Each pair counts as one item for progress

        // Function to generate random stars
        function generateStars() {
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }
        }

        // Function to create confetti
        function createConfetti() {
            const confettiColors = ['#ff7e5f', '#feb47b', '#ffc700', '#a855f7', '#38bdf8', '#ef4444', '#22c55e'];
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.setProperty('--color', confettiColors[Math.floor(Math.random() * confettiColors.length)]);
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = `${Math.random() * 100}vh`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                confetti.style.animationDuration = `${3 + Math.random() * 2}s`;
                document.body.appendChild(confetti);
                // Remove confetti after animation to prevent DOM bloat
                confetti.addEventListener('animationend', () => confetti.remove());
            }
        }

        // Function to update overall progress bar and percentage
        function updateOverallProgress() {
            const currentProgress = knownCards.size + solvedRiddles.size + matchedPairs.size;
            const progressPercentage = (currentProgress / overallTotalProgressItems) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressPercent.textContent = Math.round(progressPercentage);
            overallProgressCountDisplay.textContent = currentProgress;
            overallTotalCountDisplay.textContent = overallTotalProgressItems;
        }

        // Function to update all text content based on current language
        function updateTextContent() {
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.dataset.langKey;
                if (translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            document.querySelectorAll('[data-lang-placeholder-key]').forEach(element => {
                const key = element.dataset.langPlaceholderKey;
                if (translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });
            // Special handling for dynamic content that needs to be re-rendered
            if (currentSection === 'learning') {
                updateLearningCard();
            } else if (currentSection === 'riddles') {
                loadRiddle(); // Re-load riddle to get it in the correct language
            }
            // Update user name display if available
            if (userNameDisplay.textContent) {
                userNameDisplay.textContent = userName;
            }
            if (certificateUserName.textContent) {
                certificateUserName.textContent = userName;
            }
        }

        // --- Language Toggle Event Listeners ---
        langToggleTr.addEventListener('click', () => {
            currentLanguage = 'tr';
            updateTextContent();
            langToggleTr.classList.add('bg-gray-700');
            langToggleEn.classList.remove('bg-gray-700');
        });

        langToggleEn.addEventListener('click', () => {
            currentLanguage = 'en';
            updateTextContent();
            langToggleEn.classList.add('bg-gray-700');
            langToggleTr.classList.remove('bg-gray-700');
        });

        // --- Learning Card Functions ---
        function updateLearningCard() {
            const card = aiConcepts[currentCardIndex];
            cardFrontTitle.textContent = card.title;
            cardFrontText.textContent = card.text;
            cardFrontSvg.innerHTML = card.svg; // Set innerHTML for SVG
            cardBackTitle.textContent = card.storyTitle;
            cardBackText.textContent = card.storyText;
            cardBadge.textContent = `${translations[currentLanguage]['concept']} #${currentCardIndex + 1}`;

            // Reset card flip state
            currentCardElement.classList.remove('flipped');

            // Update button states
            btnPrev.disabled = currentCardIndex === 0;
            btnNext.disabled = currentCardIndex === aiConcepts.length - 1; // Always allow next for learning cards

            // Enable/disable "Anladım" and "Tekrar" based on current card's state
            btnKnown.disabled = knownCards.has(currentCardIndex);
            btnUnknown.disabled = unknownCards.has(currentCardIndex); 

            updateLearningStats();
            updateOverallProgress();

            // If all learning cards are known, enable the "Complete" button
            // Removed: if (knownCards.size === totalLearningCards) {
            // Removed:     btnComplete.classList.remove('hidden');
            // Removed: } else {
            // Removed:     btnComplete.classList.add('hidden');
            // Removed: }
        }

        function updateLearningStats() {
            statsKnown.textContent = knownCards.size;
            statsUnknown.textContent = unknownCards.size;
            statsRemaining.textContent = aiConcepts.length - knownCards.size;
        }

        // --- Robi AI Chat Function ---
        async function askRobi() {
            const question = robiQuestionInput.value.trim();
            if (!question) {
                robiAnswer.textContent = translations[currentLanguage]['robi_no_question'];
                return;
            }

            robiAnswer.textContent = translations[currentLanguage]['robi_thinking'];
            robiLoadingIndicator.classList.remove('hidden');
            askRobiBtn.disabled = true;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `A child is asking you a question about AI. Answer in a child-friendly, short, and concise way. The response should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}. Question: "${question}"` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    robiAnswer.textContent = text;
                } else {
                    robiAnswer.textContent = translations[currentLanguage]['robi_api_error'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                robiAnswer.textContent = translations[currentLanguage]['robi_api_error'];
            } finally {
                robiLoadingIndicator.classList.add('hidden');
                askRobiBtn.disabled = false;
                robiQuestionInput.value = '';
            }
        }

        // --- AI Story Generator Function ---
        async function generateAIStory() {
            const keywords = storyKeywordsInput.value.trim();
            if (!keywords) {
                storyText.textContent = translations[currentLanguage]['story_no_keywords'];
                return;
            }

            storyText.textContent = translations[currentLanguage]['story_loading'];
            storyLoadingIndicator.classList.remove('hidden');
            generateStoryBtn.disabled = true;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Generate a short, child-friendly story (around 100-150 words) about AI, robots, or technology, incorporating the following keywords: "${keywords}". The story should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    storyText.textContent = text;
                } else {
                    storyText.textContent = translations[currentLanguage]['story_api_error'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                storyText.textContent = translations[currentLanguage]['story_api_error'];
            } finally {
                storyLoadingIndicator.classList.add('hidden');
                generateStoryBtn.disabled = false;
                // storyKeywordsInput.value = ''; // Keep keywords for easy re-generation
            }
        }

        // --- "What Does This AI Do?" Scenario Generator Function ---
        async function analyzeAIScenario() {
            const scenario = scenarioInput.value.trim();
            if (!scenario) {
                scenarioAnalysisText.textContent = translations[currentLanguage]['scenario_no_input'];
                return;
            }

            scenarioAnalysisText.textContent = translations[currentLanguage]['scenario_loading'];
            scenarioLoadingIndicator.classList.remove('hidden');
            analyzeScenarioBtn.disabled = true;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Given the scenario: "${scenario}", describe in 2-3 sentences what AI might do or how it would be used in a child-friendly way. The explanation should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    scenarioAnalysisText.textContent = text;
                } else {
                    scenarioAnalysisText.textContent = translations[currentLanguage]['scenario_api_error'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                scenarioAnalysisText.textContent = translations[currentLanguage]['scenario_api_error'];
            } finally {
                scenarioLoadingIndicator.classList.add('hidden');
                analyzeScenarioBtn.disabled = false;
                // scenarioInput.value = ''; // Keep scenario for easy re-analysis
            }
        }

        // --- AI Fun Fact Generator Function ---
        async function generateAIFunFact() {
            funFactText.textContent = translations[currentLanguage]['fun_fact_loading'];
            funFactLoadingIndicator.classList.remove('hidden');
            generateFunFactBtn.disabled = true;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Generate a short, interesting, and child-friendly fun fact about Artificial Intelligence or robots. The fact should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    funFactText.textContent = text;
                } else {
                    funFactText.textContent = translations[currentLanguage]['fun_fact_api_error'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                funFactText.textContent = translations[currentLanguage]['fun_fact_api_error'];
            } finally {
                funFactLoadingIndicator.classList.add('hidden');
                generateFunFactBtn.disabled = false;
            }
        }

        // --- AI Invention Idea Generator Function ---
        async function generateAIInventionIdea() {
            const topic = inventionTopicInput.value.trim();
            if (!topic) {
                inventionText.textContent = translations[currentLanguage]['invention_no_topic'];
                return;
            }

            inventionText.textContent = translations[currentLanguage]['invention_loading'];
            inventionLoadingIndicator.classList.remove('hidden');
            generateInventionBtn.disabled = true;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Generate a creative and child-friendly idea for an AI invention related to "${topic}". Describe it in 2-3 sentences. The idea should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    inventionText.textContent = text;
                } else {
                    inventionText.textContent = translations[currentLanguage]['invention_api_error'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                inventionText.textContent = translations[currentLanguage]['invention_api_error'];
            } finally {
                inventionLoadingIndicator.classList.add('hidden');
                generateInventionBtn.disabled = false;
                // inventionTopicInput.value = ''; // Keep topic for easy re-generation
            }
        }


        // --- Riddle Functions ---
        async function showRiddleScreen() {
            gameScreen.classList.add('hidden');
            riddleScreen.classList.remove('hidden');
            currentSection = 'riddles';
            await loadRiddle(); // Await the riddle loading
        }

        async function loadRiddle() {
            riddleQuestion.textContent = translations[currentLanguage]['riddle_loading'];
            riddleAnswerInput.value = '';
            riddleFeedback.textContent = '';
            riddleFeedback.className = 'text-center mt-4 font-bold';
            riddleLoadingIndicator.classList.remove('hidden');
            submitRiddleAnswerBtn.disabled = true;
            btnPrevRiddle.disabled = true;
            btnNextRiddle.disabled = true;

            try {
                const riddleData = riddles[currentRiddleIndex];
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `${riddleData.prompt} The response should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const generatedRiddle = result.candidates[0].content.parts[0].text;
                    riddleQuestion.textContent = generatedRiddle;
                } else {
                    riddleQuestion.textContent = translations[currentLanguage]['riddle_load_error'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                riddleQuestion.textContent = translations[currentLanguage]['riddle_api_error'];
            } finally {
                riddleLoadingIndicator.classList.add('hidden');
                submitRiddleAnswerBtn.disabled = solvedRiddles.has(currentRiddleIndex);
                btnPrevRiddle.disabled = currentRiddleIndex === 0;
                btnNextRiddle.disabled = currentRiddleIndex === riddles.length - 1 || !solvedRiddles.has(currentRiddleIndex);
                
                riddleCountDisplay.textContent = solvedRiddles.size;
                updateOverallProgress();

                if (solvedRiddles.size === totalRiddles) {
                    btnNextRiddle.disabled = false;
                    btnNextRiddle.textContent = translations[currentLanguage]['proceed_to_matching'];
                    btnNextRiddle.removeEventListener('click', nextRiddle);
                    btnNextRiddle.addEventListener('click', showMatchingGameScreen);
                } else {
                    btnNextRiddle.textContent = translations[currentLanguage]['next_button'];
                    btnNextRiddle.removeEventListener('click', showMatchingGameScreen);
                    btnNextRiddle.addEventListener('click', nextRiddle);
                }
            }
        }

        function checkRiddleAnswer() {
            const userAnswer = riddleAnswerInput.value.trim().toLowerCase();
            const correctAnswer = riddles[currentRiddleIndex].answer.toLowerCase();

            if (userAnswer === correctAnswer) {
                riddleFeedback.textContent = translations[currentLanguage]['riddle_correct'];
                riddleFeedback.classList.remove('text-red-400');
                riddleFeedback.classList.add('text-green-400');
                solvedRiddles.add(currentRiddleIndex);
                submitRiddleAnswerBtn.disabled = true;
                if (solvedRiddles.size === totalRiddles) {
                    btnNextRiddle.disabled = false;
                    btnNextRiddle.textContent = translations[currentLanguage]['proceed_to_matching'];
                    btnNextRiddle.removeEventListener('click', nextRiddle);
                    btnNextRiddle.addEventListener('click', showMatchingGameScreen);
                } else {
                    btnNextRiddle.disabled = false; 
                }
            } else {
                riddleFeedback.textContent = translations[currentLanguage]['riddle_incorrect'];
                riddleFeedback.classList.remove('text-green-400');
                riddleFeedback.classList.add('text-red-400');
                solvedRiddles.delete(currentRiddleIndex); 
                btnNextRiddle.disabled = true; 
            }
            riddleCountDisplay.textContent = solvedRiddles.size;
            updateOverallProgress();
        }

        async function prevRiddle() {
            if (currentRiddleIndex > 0) {
                currentRiddleIndex--;
                await loadRiddle();
            }
        }

        async function nextRiddle() {
            if (currentRiddleIndex < riddles.length - 1) {
                currentRiddleIndex++;
                await loadRiddle();
            }
        }

        // --- Matching Game Functions ---
        function showMatchingGameScreen() {
            riddleScreen.classList.add('hidden');
            matchingGameScreen.classList.remove('hidden');
            currentSection = 'matching';
            initializeMatchingGame();
            updateOverallProgress();
        }

        function initializeMatchingGame() {
            matchingGrid.innerHTML = ''; 
            flippedCards = [];
            lockBoard = false;
            matchedPairs.clear(); 

            const cards = [...matchingPairs.flatMap(pair => [
                { id: pair.id, text: pair.concept, type: 'concept' },
                { id: pair.id, text: pair.description, type: 'description' }
            ])];

            // Shuffle cards
            cards.sort(() => Math.random() - 0.5);

            cards.forEach((cardData, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('matching-card');
                cardElement.dataset.id = cardData.id;
                cardElement.dataset.type = cardData.type;
                cardElement.dataset.index = index; 

                cardElement.innerHTML = `
                    <div class="card-face card-front-face">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-cyan-400" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM11 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2h-2zM11 9a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2zM5 9a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
                        </svg>
                    </div>
                    <div class="card-face card-back-face">
                        ${cardData.text}
                    </div>
                `;
                cardElement.addEventListener('click', flipCard);
                matchingGrid.appendChild(cardElement);
            });

            matchingFeedback.textContent = '';
            btnCompleteMatching.classList.add('hidden');
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === flippedCards[0]) return; 

            this.classList.add('flipped');
            flippedCards.push(this);

            if (flippedCards.length === 2) {
                lockBoard = true;
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [firstCard, secondCard] = flippedCards;
            const isMatch = firstCard.dataset.id === secondCard.dataset.id && firstCard.dataset.type !== secondCard.dataset.type;

            if (isMatch) {
                disableCards();
                matchedPairs.add(parseInt(firstCard.dataset.id)); 
                matchingFeedback.textContent = translations[currentLanguage]['matching_matched'];
                matchingFeedback.classList.remove('text-red-400');
                matchingFeedback.classList.add('text-green-400');
            } else {
                unflipCards();
                matchingFeedback.textContent = translations[currentLanguage]['matching_not_matched'];
                matchingFeedback.classList.remove('text-green-400');
                matchingFeedback.classList.add('text-red-400');
            }
            updateOverallProgress();
            if (matchedPairs.size === totalMatchingPairs) {
                matchingFeedback.textContent = translations[currentLanguage]['matching_all_matched'];
                matchingFeedback.classList.remove('text-red-400');
                matchingFeedback.classList.add('text-green-400');
                btnCompleteMatching.classList.remove('hidden');
                createConfetti(); // Trigger confetti when all matching pairs are found
            }
        }

        function disableCards() {
            flippedCards.forEach(card => {
                card.removeEventListener('click', flipCard);
                card.classList.add('matched');
            });
            resetBoard();
        }

        function unflipCards() {
            setTimeout(() => {
                flippedCards.forEach(card => {
                    card.classList.remove('flipped');
                });
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [flippedCards, lockBoard] = [[], false];
        }

        // --- Screen Transition Functions ---
        async function showCertificateScreen() {
            gameScreen.classList.add('hidden');
            riddleScreen.classList.add('hidden');
            matchingGameScreen.classList.add('hidden');
            certificateScreen.classList.remove('hidden');
            certificateUserName.textContent = userName;
            certificateDate.textContent = new Date().toLocaleDateString(currentLanguage === 'tr' ? 'tr-TR' : 'en-US');

            // Generate personalized certificate message
            certificateMessage.textContent = translations[currentLanguage]['certificate_message_loading'];
            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `A child named ${userName} completed the AI adventure. Write a 2-3 sentence, motivating, AI-themed congratulatory message for them. The message should be in ${currentLanguage === 'tr' ? 'Turkish' : 'English'}.` }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const message = result.candidates[0].content.parts[0].text;
                    certificateMessage.textContent = message;
                } else {
                    certificateMessage.textContent = translations[currentLanguage]['certificate_message_default'];
                }
            } catch (error) {
                console.error("Gemini API hatası:", error);
                certificateMessage.textContent = translations[currentLanguage]['certificate_message_default'];
            }
        }

        function backToGameFromCertificate() {
            certificateScreen.classList.add('hidden');
            // Determine which screen to go back to based on progress
            if (matchedPairs.size < totalMatchingPairs) {
                matchingGameScreen.classList.remove('hidden');
                currentSection = 'matching';
            } else if (solvedRiddles.size < totalRiddles) {
                riddleScreen.classList.remove('hidden');
                currentSection = 'riddles';
            } else {
                gameScreen.classList.remove('hidden');
                currentSection = 'learning';
            }
            updateTextContent(); // Ensure text is updated on return
        }

        // --- Event Listeners ---
        startAdventureBtn.addEventListener('click', () => {
            userName = userNameInput.value.trim();
            if (userName) {
                welcomeScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                userNameDisplay.textContent = userName;
                currentSection = 'learning';
                updateLearningCard();
                updateTextContent(); // Update text for game screen
            } else {
                // Using a custom message instead of alert for better UX
                alert(translations[currentLanguage]['robi_no_question']); 
            }
        });

        currentCardElement.addEventListener('click', () => {
            currentCardElement.classList.toggle('flipped');
        });

        btnPrev.addEventListener('click', () => {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateLearningCard();
            }
        });

        btnNext.addEventListener('click', () => {
            if (currentCardIndex < aiConcepts.length - 1) {
                currentCardIndex++;
                updateLearningCard();
            } else if (knownCards.size === totalLearningCards) {
                showRiddleScreen();
            }
        });

        btnKnown.addEventListener('click', () => {
            if (!knownCards.has(currentCardIndex)) {
                knownCards.add(currentCardIndex);
                unknownCards.delete(currentCardIndex); 
                updateLearningCard(); 
                // Removed: if (knownCards.size === totalLearningCards) {
                // Removed:     btnComplete.classList.remove('hidden');
                // Removed: }
            }
        });

        btnUnknown.addEventListener('click', () => {
            if (!unknownCards.has(currentCardIndex)) {
                unknownCards.add(currentCardIndex);
                knownCards.delete(currentCardIndex); 
                updateLearningCard(); 
                // Removed: btnComplete.classList.add('hidden'); 
            }
        });

        btnReset.addEventListener('click', () => {
            if (confirm(translations[currentLanguage]['confirm_reset'])) { 
                knownCards.clear();
                unknownCards.clear();
                solvedRiddles.clear();
                matchedPairs.clear();
                currentCardIndex = 0;
                currentRiddleIndex = 0;
                currentSection = 'learning';
                gameScreen.classList.remove('hidden');
                riddleScreen.classList.add('hidden');
                matchingGameScreen.classList.add('hidden');
                certificateScreen.classList.add('hidden');
                updateLearningCard();
                updateTextContent(); // Ensure text is updated after reset
            }
        });

        // Removed: btnComplete.addEventListener('click', showRiddleScreen); 

        // Robi Chat Event Listeners
        askRobiBtn.addEventListener('click', askRobi);
        robiQuestionInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                askRobi();
            }
        });

        // AI Story Generator Event Listeners
        generateStoryBtn.addEventListener('click', generateAIStory);
        storyKeywordsInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                generateAIStory();
            }
        });

        // "What Does This AI Do?" Scenario Generator Event Listeners
        analyzeScenarioBtn.addEventListener('click', analyzeAIScenario);
        scenarioInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                analyzeAIScenario();
            }
        });

        // New: AI Fun Fact Generator Event Listener
        generateFunFactBtn.addEventListener('click', generateAIFunFact);

        // New: AI Invention Idea Generator Event Listener
        generateInventionBtn.addEventListener('click', generateAIInventionIdea);
        inventionTopicInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                generateAIInventionIdea();
            }
        });

        // Riddle Screen Event Listeners
        submitRiddleAnswerBtn.addEventListener('click', checkRiddleAnswer);
        riddleAnswerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkRiddleAnswer();
            }
        });
        btnPrevRiddle.addEventListener('click', prevRiddle);
        btnNextRiddle.addEventListener('click', nextRiddle); 

        // Matching Game Event Listeners
        btnResetMatching.addEventListener('click', initializeMatchingGame);
        btnCompleteMatching.addEventListener('click', showCertificateScreen);

        btnBackToGame.addEventListener('click', backToGameFromCertificate);
        btnPrintCertificate.addEventListener('click', () => {
            window.print();
        });

        // Initial setup
        generateStars();
        updateOverallProgress(); 
        updateTextContent(); // Call initially to set default language texts
        langToggleTr.classList.add('bg-gray-700'); // Highlight default language button
    </script>
</body>
</html>
